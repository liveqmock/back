package com.ihk.saleunit.data.pojo;

import java.io.Serializable;
import java.util.Date;

import com.ihk.constanttype.ContUnitSaleState;
import com.ihk.user.data.pojo.UserAccount;
import com.ihk.utils.DateTimeUtils;
import com.ihk.utils.saleunit.MyPropertyUtils;

/**
 * UnitOperRecord的实体类
 * @author 
 * 
 */
public class UnitOperRecord implements Serializable{
	
    
	//以下由代码生成器生成,如果手工添加代码，务必写在本代码页面最下方
    
	private static final long serialVersionUID = 3141927401592375994L;
	private int id;
	private int companyProjectId;
	private int propertyProjectId;
	private int areaId;
	private int buildId;
	private int unitId;
	private int parentId;
	private String operType;
	private int mainId;
	private String isDeleted;
	private int createdId;
	private Date createdTime;
	private int modId;
	private Date modTime;
	
	

	/**
	 * 取得Id()
	 */
	public int getId() {
		return id;
	}

	/**
	 * 设置id()
	 * @param id ()
	 */
	public void setId(int id) {
		this.id = id;
	}
    
	/**
	 * 取得CompanyProjectId(公司项目id)
	 */
	public int getCompanyProjectId() {
		return companyProjectId;
	}

	/**
	 * 设置companyProjectId(公司项目id)
	 * @param companyProjectId (公司项目id)
	 */
	public void setCompanyProjectId(int companyProjectId) {
		this.companyProjectId = companyProjectId;
	}
    
	/**
	 * 取得PropertyProjectId(楼盘项目id)
	 */
	public int getPropertyProjectId() {
		return propertyProjectId;
	}

	/**
	 * 设置propertyProjectId(楼盘项目id)
	 * @param propertyProjectId (楼盘项目id)
	 */
	public void setPropertyProjectId(int propertyProjectId) {
		this.propertyProjectId = propertyProjectId;
	}
    
	/**
	 * 取得AreaId(分区id)
	 */
	public int getAreaId() {
		return areaId;
	}

	/**
	 * 设置areaId(分区id)
	 * @param areaId (分区id)
	 */
	public void setAreaId(int areaId) {
		this.areaId = areaId;
	}
    
	/**
	 * 取得BuildId(楼栋id)
	 */
	public int getBuildId() {
		return buildId;
	}

	/**
	 * 设置buildId(楼栋id)
	 * @param buildId (楼栋id)
	 */
	public void setBuildId(int buildId) {
		this.buildId = buildId;
	}
    
	/**
	 * 取得UnitId(单元id)
	 */
	public int getUnitId() {
		return unitId;
	}

	/**
	 * 设置unitId(单元id)
	 * @param unitId (单元id)
	 */
	public void setUnitId(int unitId) {
		this.unitId = unitId;
	}
    
	/**
	 * 取得ParentId(对应该表上个记录状态的主键id(如果单元从可售转变过来,该值为0))
	 */
	public int getParentId() {
		return parentId;
	}

	/**
	 * 设置parentId(对应该表上个记录状态的主键id(如果单元从可售转变过来,该值为0))
	 * @param parentId (对应该表上个记录状态的主键id(如果单元从可售转变过来,该值为0))
	 */
	public void setParentId(int parentId) {
		this.parentId = parentId;
	}
    
	/**
	 * 取得OperType(操作类型(认筹,临定,成交,合同,挞定,换房,退房...))
	 */
	public String getOperType() {
		return operType;
	}

	/**
	 * 设置operType(操作类型(认筹,临定,成交,合同,挞定,换房,退房...))
	 * @param operType (操作类型(认筹,临定,成交,合同,挞定,换房,退房...))
	 */
	public void setOperType(String operType) {
		this.operType = operType;
	}
    
	/**
	 * 取得MainId(操作类型对应的表的id)
	 */
	public int getMainId() {
		return mainId;
	}

	/**
	 * 设置mainId(操作类型对应的表的id)
	 * @param mainId (操作类型对应的表的id)
	 */
	public void setMainId(int mainId) {
		this.mainId = mainId;
	}
    
	/**
	 * 取得IsDeleted(是否删除)
	 */
	public String getIsDeleted() {
		return isDeleted;
	}

	/**
	 * 设置isDeleted(是否删除)
	 * @param isDeleted (是否删除)
	 */
	public void setIsDeleted(String isDeleted) {
		this.isDeleted = isDeleted;
	}
    
	/**
	 * 取得CreatedId(创建人)
	 */
	public int getCreatedId() {
		return createdId;
	}

	/**
	 * 设置createdId(创建人)
	 * @param createdId (创建人)
	 */
	public void setCreatedId(int createdId) {
		this.createdId = createdId;
	}
    
	/**
	 * 取得CreatedTime(创建时间)
	 */
	public Date getCreatedTime() {
		return createdTime;
	}

	/**
	 * 设置createdTime(创建时间)
	 * @param createdTime (创建时间)
	 */
	public void setCreatedTime(Date createdTime) {
		this.createdTime = createdTime;
	}
    
	/**
	 * 取得ModId(修改人)
	 */
	public int getModId() {
		return modId;
	}

	/**
	 * 设置modId(修改人)
	 * @param modId (修改人)
	 */
	public void setModId(int modId) {
		this.modId = modId;
	}
    
	/**
	 * 取得ModTime(修改时间)
	 */
	public Date getModTime() {
		return modTime;
	}

	/**
	 * 设置modTime(修改时间)
	 * @param modTime (修改时间)
	 */
	public void setModTime(Date modTime) {
		this.modTime = modTime;
	}
    
	
	public UnitOperRecord(){};


	/**
	 * 
	 * @param id ()
	 * @param companyProjectId (公司项目id)
	 * @param propertyProjectId (楼盘项目id)
	 * @param areaId (分区id)
	 * @param buildId (楼栋id)
	 * @param unitId (单元id)
	 * @param parentId (对应该表上个记录状态的主键id(如果单元从可售转变过来,该值为0))
	 * @param operType (操作类型(认筹,临定,成交,合同,挞定,换房,退房...))
	 * @param mainId (操作类型对应的表的id)
	 * @param isDeleted (是否删除)
	 * @param createdId (创建人)
	 * @param createdTime (创建时间)
	 * @param modId (修改人)
	 * @param modTime (修改时间)
	 */
	public UnitOperRecord(    
		int id,
        		int companyProjectId,
        		int propertyProjectId,
        		int areaId,
        		int buildId,
        		int unitId,
        		int parentId,
        		String operType,
        		int mainId,
        		String isDeleted,
        		int createdId,
        		Date createdTime,
        		int modId,
        		Date modTime
        ) {
		super();  
		this.id = id;
		this.companyProjectId = companyProjectId;
		this.propertyProjectId = propertyProjectId;
		this.areaId = areaId;
		this.buildId = buildId;
		this.unitId = unitId;
		this.parentId = parentId;
		this.operType = operType;
		this.mainId = mainId;
		this.isDeleted = isDeleted;
		this.createdId = createdId;
		this.createdTime = createdTime;
		this.modId = modId;
		this.modTime = modTime;
	}
    
	/**
	 * 
	 * @param companyProjectId (公司项目id)
	 * @param propertyProjectId (楼盘项目id)
	 * @param areaId (分区id)
	 * @param buildId (楼栋id)
	 * @param unitId (单元id)
	 * @param parentId (对应该表上个记录状态的主键id(如果单元从可售转变过来,该值为0))
	 * @param operType (操作类型(认筹,临定,成交,合同,挞定,换房,退房...))
	 * @param mainId (操作类型对应的表的id)
	 * @param isDeleted (是否删除)
	 * @param createdId (创建人)
	 * @param createdTime (创建时间)
	 * @param modId (修改人)
	 * @param modTime (修改时间)
	 */
	public UnitOperRecord(    
		int companyProjectId,
        		int propertyProjectId,
        		int areaId,
        		int buildId,
        		int unitId,
        		int parentId,
        		String operType,
        		int mainId,
        		String isDeleted,
        		int createdId,
        		Date createdTime,
        		int modId,
        		Date modTime
        ) {
		super();		
		this.companyProjectId = companyProjectId;
		this.propertyProjectId = propertyProjectId;
		this.areaId = areaId;
		this.buildId = buildId;
		this.unitId = unitId;
		this.parentId = parentId;
		this.operType = operType;
		this.mainId = mainId;
		this.isDeleted = isDeleted;
		this.createdId = createdId;
		this.createdTime = createdTime;
		this.modId = modId;
		this.modTime = modTime;
	}
    

	//以上由代码生成器生成
	//以下非代码生成器生成,不可覆盖,以下是手工代码
	
	private String remark;
	private String operTypeStr;
	private String contUrl;
	private boolean flag;
	private Date operTime;
	private boolean confirmOrConfirmBook;
	
	
	public boolean getFlag() {
		return flag;
	}

	public void setFlag(boolean flag) {
		this.flag = flag;
	}

	public boolean isConfirmOrConfirmBook() {
		return confirmOrConfirmBook;
	}

	public void setConfirmOrConfirmBook(boolean confirmOrConfirmBook) {
		this.confirmOrConfirmBook = confirmOrConfirmBook;
	}

	public String getContUrl() {
		if(flag==false){
			if(operType.equals(ContUnitSaleState.TART)){
				return getContUrl("showTartRecord",mainId,"查看挞订记录");
			}
			if(operType.equals(ContUnitSaleState.CHANGE_CUSTOMER)){
				return getContUrl("showCustomerRenameRecord",mainId,unitId,"查看改名记录");
			}
			if(operType.equals(ContUnitSaleState.CHANGE_UNIT)){
				return getContUrl("changeUnitRecord",mainId,"查看新认购书");
			}
			if(operType.equals(ContUnitSaleState.CANCEL_UNIT)){
				return getContUrl("cancelUnitRecord",mainId,"查看退房记录");
			}
		}else{
			if(confirmOrConfirmBook==true){
				if(operType.equals(ContUnitSaleState.TART)){
					return getContUrl("showTartRecord",mainId,"查看挞订记录","cancelTart","撤消挞订",id);
				}
			}
			if(confirmOrConfirmBook==false){
				if(operType.equals(ContUnitSaleState.TART)){
					return "<a href='javascript:void(0)' style='color:#1199FF; text-decoration:underline;padding: 0px 5px 0px' onclick='cancelTart("+id+")'>撤消挞订</a>";
				}
			}
			if(operType.equals(ContUnitSaleState.CHANGE_CUSTOMER)){
				return getContUrl("showCustomerRenameRecord",mainId,unitId,"查看改名记录");
			}
			if(operType.equals(ContUnitSaleState.CHANGE_UNIT)){
				return getContUrl("changeUnitRecord",mainId,"查看新认购书");
			}
			if(operType.equals(ContUnitSaleState.CANCEL_UNIT)){
				return getContUrl("cancelUnitRecord",mainId,"查看退房记录","cancelCancelUnit","撤消退房",id);
			}
			
		}
		
		return null;
	}

	public void setContUrl(String contUrl) {
		this.contUrl = contUrl;
	}

	private String getContUrl(String fnName,int mainId,String textStr){
		return "<a href='javascript:void(0)' style='color:#1199FF; text-decoration:underline;padding: 0px 5px 0px' onclick='"+fnName+"("+mainId+")'>"+textStr+"</a>";
	}
	
	private String getContUrl(String fnName,int mainId,int unitId,String textStr){
		return "<a href='javascript:void(0)' style='color:#1199FF; text-decoration:underline;padding: 0px 5px 0px' onclick='"+fnName+"("+mainId+","+unitId+")'>"+textStr+"</a>";
	}
	
	private String getContUrl(String fnName,int mainId,String textStr,String cancelFnName,String cancel,int recordId){
		return "<a href='javascript:void(0)' style='color:#1199FF; text-decoration:underline;padding: 0px 5px 0px' onclick='"+fnName+"("+mainId+")'>"+textStr+"</a>"+"&nbsp&nbsp<a href='javascript:void(0)' style='color:#1199FF; text-decoration:underline;padding: 0px 5px 0px' onclick='"+cancelFnName+"("+recordId+")'>"+cancel+"</a>";
	}
	
	private String getContUrl(String fnName,int mainId,int unitId,String textStr,String cancelFnName,String cancel,int recordId){
		return "<a href='javascript:void(0)' style='color:#1199FF; text-decoration:underline;padding: 0px 5px 0px' onclick='"+fnName+"("+mainId+","+unitId+")'>"+textStr+"</a>"+"&nbsp&nbsp<a href='javascript:void(0)' style='color:#1199FF; text-decoration:underline;padding: 0px 5px 0px' onclick='"+cancelFnName+"("+recordId+")'>"+cancel+"</a>";
	}
	
	

	public String getRemark() {
		return remark;
	}

	public void setRemark(String remark) {
		this.remark = remark;
	}

	public String getOperTypeStr() {
		return ContUnitSaleState.getSaleState().get(operType);
	}

	public void setOperTypeStr(String operTypeStr) {
		this.operTypeStr = operTypeStr;
	}
	
	public void setOperTime(Date operTime){
		this.operTime = operTime;
	}
	
	
    public Date getOperTime(){
    	//UnitOperRecord unitOperRecord=unitOperRecordServices.findUnitOperRecordById(id);
    	if(operType.equals(ContUnitSaleState.CONFIRM)){
    		return MyPropertyUtils.getConfirmServices().findConfirmById(mainId).getWorkDate();
    	}
    	if(operType.equals(ContUnitSaleState.CONTRACT)){
    		return MyPropertyUtils.getContractServices().findContractById(mainId).getWorkDate();
    	}
    	if(operType.equals(ContUnitSaleState.TART)){
    		return MyPropertyUtils.getTartServices().findTartById(mainId).getTartDate();
    	}
    	if(operType.equals(ContUnitSaleState.CHANGE_CUSTOMER)){
    		return MyPropertyUtils.getCustomerRenameServices().findCustomerRenameById(mainId).getRenameTime();
    	}
    	if(operType.equals(ContUnitSaleState.CHANGE_UNIT)){
    		return MyPropertyUtils.getReplaceUnitServices().findReplaceUnitById(mainId).getReplaceDate();
    	}
    	if(operType.equals(ContUnitSaleState.CANCEL_UNIT)){
    		return MyPropertyUtils.getCancelUnitServices().findCancelUnitById(mainId).getCancelTime();
    	}
    	if(operType.equals(ContUnitSaleState.MODIFY_CONFIRM)||operType.equals(ContUnitSaleState.MODIFY_CONTRACT)){
    		return DateTimeUtils.getNow().toDate();
    	}
    	return null;
    }
    
    public String getCreatedIdStr(){
    	UserAccount ua = MyPropertyUtils.getUserAccountServices().findUserAccountById(createdId);
    	return ua==null?"":ua.getRealName();
    }
}
